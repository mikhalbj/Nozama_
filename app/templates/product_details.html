{% extends "base.html" %}

{% block content %}

<br><br>

  <!-- Edit product modal -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Update Product Information</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        
        <div class="modal-body">
            <form action="" method="post">
                {{ edit_form.csrf_token }}
                <div class="d-flex justify-content-left mb-3">
                    <p>Product ID: {{edit_form.prod_id}}</p>
                    <p>Product name: {{edit_form.name}}</p>
                    <p>Description: {{edit_form.description}}</p>
                    <p>Price: {{edit_form.price}}</p>
                    <p>Quantity: {{edit_form.quantity}}</p>
                    <p>URL: {{edit_form.url}}</p>
                </div>

                <div class="d-grid gap-2">
                    {{edit_form.submit2(class_='btn btn-success btn-large')}}
                </div>
            </form>
        </div>
    </div>
    </div>
  </div>

<!-- Sell Modal -->
<div class="modal fade" id="sellModal" tabindex="-1" aria-labelledby="sellModalLabel" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="sellModalLabel">Sell This Product</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
          <form action="" method="post">
            {{sf.csrf_token}}
              <div class="d-flex justify-content-left mb-3">
                  <p><h1>{{sf.quantity(placeholder='1')}}</h1></p>
              </div>
              <div class="d-flex justify-content-left mb-3">
                <p><h1>{{sf.optin()}}</h1></p>
              </div>
              <div class="d-grid gap-2">
                  {{sf.submit(class_='btn btn-success btn-large')}}
              </div>
          </form>
      </div>
  </div>
  </div>
</div>

<!-- Cart Modal -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
  <div class="modal-dialog">
  <div class="modal-content">
      <div class="modal-header">
      <h5 class="modal-title" id="cartModalLabel">Add to Cart</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
          <form action="" method="post">
            {{cartform.csrf_token}}
              <div class="d-flex justify-content-left mb-3">
                  <p><h1>{{cartform.quantity(placeholder='1')}}</h1></p>
              </div>

              <div class="d-grid gap-2">
                  {{cartform.submit(class_='btn btn-success btn-large')}}
              </div>
          </form>
      </div>
  </div>
  </div>
</div>

<h2>Product you clicked on:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
      <th scope="col">Rating</th>
      <th scope="col">Desc</th>
      <th scope="col">Seller</th>
      <th scope="col">Inventory</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <th scope="row">{{product.id}}</th>
        <td>{{product.name}}</td>
        <td>{{product.price}}</td>
        <td>{{product.rate}}</td>
        <td>{{product.description}}</td>
        <td>{{num}}</td>
      </tr>
  </tbody>
</table>
<img style= "width: 15%; margin-left: 40%; margin-right: 40%;"src={{imgurl}} class="img-fluid rounded-start" alt="...">
<button type="button" class="btn btn-primary mr-2" data-bs-toggle="modal" data-bs-target="#cartModal"> Add to Cart</button>
{% if sb%}
  <button type="button" class="btn btn-primary mr-2" data-bs-toggle="modal" data-bs-target="#sellModal"> Start selling</button>
{%endif%}
{% if eb%}
  <button type="button" class="btn btn-primary mr-2" data-bs-toggle="modal" data-bs-target="#editModal"> Edit listing</button>
{%endif%}
<h2>Reviews:</h2> 

<table class='table table-hover table-bordered container'>
  <thead><tr>
    <th>Review ID</th>
    <th>Title</th>
    <th>Author</th>
    <th>Rating</th>
    <th>Description</th>
    <th>Time</th>
    <th>Edited</th>
  </tr></thead>
  <tbody>
    {% for r in review%}
    <tr>
      <td scope="row">{{r.id}}</td>
      <td>{{r.title}}</td>
      <td>{{r.author}}</td>
      <td>{{r.rating}}</td>
      <td>{{review.description}}</td>
      <td>{{r.time}}</td>
      <td>{{r.edited}}</td>
    </tr>
    {% endfor %}
  </tbody>
  </table>

{% endblock %}
