{% extends "base.html" %}

{% block content %}

<br><br>

<h2>Your Product Inventory:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Description</th>
      <th scope="col">Quantity Available</th>
    </tr>
  </thead>
  <tbody>
    {% for inventory in inventory%}
      <tr>
        <th scope="row">{{inventory.id}}</th>
        <td><a href="{{ url_for('product.product', id=inventory.id) }}">{{inventory.name}}</a></td>
        <td>{{inventory.description}}</td>
        <td>{{inventory.quantity}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>



<div class="col-sm-6">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title">Edit Inventory</h4>
      <container>
          <div class="row g-4 pt-3">
                  <div class="col-5"><button type="button" class="btn btn-outline-primary"  data-bs-toggle="modal" data-bs-target="#editModal">Edit a Product</button></div>
                  <div class="col-5"><button type="button" class="btn btn-outline-primary"  data-bs-toggle="modal" data-bs-target="#edit_quantityModal">Edit Quantity</button></div>
                  <div class="col-5"><button type="button" class="btn btn-outline-primary"  data-bs-toggle="modal" data-bs-target="#addModal">Add a Product</button></div>
                </div>
      </container>
    </div>
  </div>
</div>
</div>

        <!-- Edit product modal -->
        <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
              <div class="modal-header">
              <h5 class="modal-title" id="editModalLabel">Update Product Information</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              
              <div class="modal-body">
                  <form action="" method="post">
                      {{ edit_form.csrf_token }}
                      <div class="d-flex justify-content-left mb-3">
                          <p>Product ID: {{edit_form.prod_id}}</p>
                          <p>Product name: {{edit_form.name}}</p>
                          <p>Description: {{edit_form.description}}</p>
                          <p>Price: {{edit_form.price}}</p>
                          <p>Quantity: {{edit_form.quantity}}</p>
                          <p>URL: {{edit_form.url}}</p>
                      </div>
  
                      <div class="d-grid gap-2">
                          {{edit_form.submit2(class_='btn btn-success btn-large')}}
                      </div>
                  </form>
              </div>
          </div>
          </div>
      </div>

        <!-- Edit quantity modal -->
        <div class="modal fade" id="edit_quantityModal" tabindex="-1" aria-labelledby="edit_quantityModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
              <div class="modal-header">
              <h5 class="modal-title" id="edit_quantityModalLabel">Edit Product Quantity</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              
              <div class="modal-body">
                  <form action="" method="post">
                      {{ quantity_form.csrf_token }}
                      <div class="d-flex justify-content-left mb-3">
                          <p>Product ID: {{quantity_form.prod_id}}</p>
                          <p>Quantity: {{quantity_form.quantity}}</p>
                      </div>
  
                      <div class="d-grid gap-2">
                          {{quantity_form.submit3(class_='btn btn-success btn-large')}}
                      </div>
                  </form>
              </div>
          </div>
          </div>
      </div>


              <!-- Add product modal -->
              <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                    <h5 class="modal-title" id="addModalLabel">Add a new product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    
                    <div class="modal-body">
                        <form action="" method="post">
                            {{ new_form.csrf_token }}
                            <div class="d-flex justify-content-left mb-3">
                                <p>Product name: {{new_form.name}}</p>
                                <p>Description: {{new_form.description}}</p>
                                <p>Price: {{new_form.price}}</p>
                                <p>Quantity: {{new_form.quantity}}</p>
                                <p>URL: {{new_form.url}}</p>
                            </div>
        
                            <div class="d-grid gap-2">
                                {{new_form.submit1(class_='btn btn-success btn-large')}}
                            </div>
                        </form>
                    </div>
                </div>
                </div>
            </div>


<h2>Your Order History:</h2>
<table class='table table-hover table-bordered container'>

  <tbody>
    {% for order in order_history%}

      <div class="card mb-4">
        <div class="card-header">
            <div class="container">
                <div class="row">
                    <div class="col float-left"><small class="text-muted">ORDER PLACED</small></div>
                    <div class="col-8"><small class="text-muted float-end">Order #: </small></div>
                </div>
                <div class="row">
                    <div class="col float-left"><small class="text-muted">{{order.placed_at.strftime("%B %d, %Y")}}</small></div>
                    <div class="col-8"><small class="text-muted" >{{order.id}}</small></div>
                </div>
            </div>
        </div>
        <div class="card-body">
        <h5 class="card-title pb-2">Order Products <span class="badge bg-secondary">{{order.status}}</span></h5>
        
        <div class="container">
            <div class="row pb-2">
                <div class="col-md-2 float-left">
                    <img src={{order.url}} class="img-fluid rounded-start" alt="...">
                </div>
                <div class="col-md-10">
                    <div class="container">
                        <div class="row"><div class="col float-left">{{order.product}} <span class="badge bg-success">Delivered</span></div></div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    </div>

    {% endfor %}
  </tbody>
</table>

{% if page and page > 1 %}
<button type="button"><a href={{pp}}>❮Previous Page</a></button>
{% endif %}
{% if pages %}
<button type="button"> <a href={{np}}> Next Page❯</a></button>
{% endif %}



{% endblock %}